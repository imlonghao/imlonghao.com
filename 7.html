<!doctype html><html lang=zh-cn><title>Shell 下免密码快速登陆 MySQL 数据库 - imlonghao</title><meta name=description content="当我们在Shell下想要通过mysql-client登陆到MySQL数据库的时候，我们总是需要非常麻烦的输入一次又一次的密码。"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=renderer content="webkit"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><link rel=dns-prefetch href=//vip1.loli.net><link rel=stylesheet href=/static/hw3x7x.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/disqusjs@1.3.0/dist/disqusjs.css integrity="sha256-GxdCIOyfxQ1OBfS99qAIJDoGK1ADuBsxhMTqXG82fAY=" crossorigin=anonymous><script src=/static/hw3x7x.js async></script><script src=https://cdn.jsdelivr.net/npm/disqusjs@1.3.0/dist/disqus.js integrity="sha256-LVaMHPQ2zLqOc5rXSAfr4d1PIkEGNLyyUTDNPZmTtUw=" crossorigin=anonymous></script><script src=//instant.page/3.0.0 type=module defer integrity=sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1></script><link rel=alternate type=application/rss+xml title="imlonghao Feed" href=https://imlonghao.com/feed.xml><div id=container><div id=header><div id=post-nav><a href=./>Home</a>
&nbsp;»&nbsp;
<a href=./7.html>Shell 下免密码快速登陆 MySQL 数据库</a></div></div><div class=clearfix></div><div id=title>Shell 下免密码快速登陆 MySQL 数据库</div><div id=content class=markdown-body><h2>背景</h2><p>当我们在 Shell 下想要通过 <code>mysql-client</code> 登陆到 MySQL 数据库的时候，我们总是需要非常麻烦的输入一次又一次的密码。<p>而且，如果你的 root 密码是高度随机的话（LastPass 大法好），那么你登陆一次 MySQL 数据库的成本就会非常大了。<p>通常我们登陆数据库的时候都是这样登陆的，如下<pre><code>root@imlonghao:~# mysql -uroot -p
Enter password:
</code></pre><p>那么，有没有一个办法能够既安全，又能简单方便地登陆到数据库去呢？<h2>方法</h2><p>答案当然是有的，而且，MySQL 也已经帮我们想过这个问题了！<p>参考链接：<a href=https://dev.mysql.com/doc/refman/5.7/en/password-security-user.html rel=nofollow>End-User Guidelines for Password Security</a><h3>使用 .my.cnf 快速登陆</h3><p>在 <code>~/</code> 目录新建一个 <code>.my.cnf</code> 文件。当然，如果你已经有这个文件了，直接修改这个文件即可！<p>我个人喜欢用 <code>vim</code> 大法，于是我们就可以这样<pre><code>vim ~/.my.cnf
</code></pre><p>然后在文件中写入下面的信息<pre><code>[client]
password=your_pass
user=your_user
</code></pre><p>注意修改 <code>your_pass</code> 和 <code>your_user</code> 为你想要登陆用户的密码和用户名<p>下面是一个例子：<pre><code>[client]
password=mysqlrootpassword123321
user=root
</code></pre><p>如果你已经有 <code>.my.cnf</code> 这个文件了，就在 <code>[client]</code> 栏位写入信息即可！<p>注意：由于 <code>.my.cnf</code> 文件中明文写了你的密码，因此要注意设置这个文件的文件权限<pre><code>root@imlonghao:~# chmod 400 ~/.my.cnf
</code></pre><p>保存后，我们就可以直接使用 <code>mysql</code> 命令登陆 MySQL 数据库了！<p>注：如果你需要指定一个设置文件而不使用默认的 <code>~/.my.cnf</code> 的话，就需要使用 <code>--defaults-file=file_name</code> 参数了。例：<pre><code>root@imlonghao:~# mysql --defaults-file=/home/imlonghao/mysql-opts
</code></pre><p>###使用环境变量 MYSQL_PWD 快速登陆<p>MySQL 优先会使用环境变量中的参数作为运行参数<pre><code>root@imlonghao:~# export MYSQL_PWD=your_pass
</code></pre><p>设置后，再次登陆 mysql 就不需要再次输入密码了。<p>不过需要注意的是，如果你退出了当前的 Shell 的话，这个环境变量就会消失。<p>更需要注意的是，你在 Shell 输入的命令，会被自动保存， history 就可以看到你输入过的命令。<h2>参考链接</h2><p><a href=http://yzs.me/2142.html rel=nofollow>利用.my.cnf，安全实现 Shell 下 MySQL 免输入密码登录</a></div></div><div id=disqus_thread></div><div id=footer><span>Copyright © 2015 - 2020 imlonghao. Theme by
<a href=http://simiki.org/ target=_blank rel="noopener noreferrer">Simiki</a>. CC BY-NC-SA 4.0</span></div><script src=https://cdn.jsdelivr.net/npm/cfga@1.0.3/cfga.min.js integrity="sha256-TXHTTKAPRQ9mgacgN+couk0xnzQ6uOXTZ5ojH1q6GUk=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/vanilla-lazyload@12.3.0/dist/lazyload.min.js integrity="sha256-bojBIKfs4l2WDcJODncBIGEe5fhU7/sM3zRO5/f2nqE=" crossorigin=anonymous async></script>