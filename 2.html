<!doctype html><html lang=zh-cn><title>正确地配置一个安全的 https 网站 (nginx/Apache/Lighttpd) - imlonghao</title><meta name=description content="如果你想配置一个安全的 https 网站的话，你就可以需要下面这个了。"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=renderer content="webkit"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><link rel=dns-prefetch href=//vip1.loli.net><link rel=stylesheet href=/static/hw3x7x.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/disqusjs@1.3.0/dist/disqusjs.css integrity="sha256-GxdCIOyfxQ1OBfS99qAIJDoGK1ADuBsxhMTqXG82fAY=" crossorigin=anonymous><script src=/static/hw3x7x.js async></script><script src=https://cdn.jsdelivr.net/npm/disqusjs@1.3.0/dist/disqus.js integrity="sha256-LVaMHPQ2zLqOc5rXSAfr4d1PIkEGNLyyUTDNPZmTtUw=" crossorigin=anonymous></script><script src=//instant.page/3.0.0 type=module defer integrity=sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1></script><link rel=alternate type=application/rss+xml title="imlonghao Feed" href=https://imlonghao.com/feed.xml><div id=container><div id=header><div id=post-nav><a href=./>Home</a>
&nbsp;»&nbsp;
<a href=./2.html>正确地配置一个安全的 https 网站 (nginx/Apache/Lighttpd)</a></div></div><div class=clearfix></div><div id=title>正确地配置一个安全的 https 网站 (nginx/Apache/Lighttpd)</div><div id=content class=markdown-body><p>如果你想配置一个安全的 https 网站的话，你就可以需要下面这个了。<p>请根据您所使用的网站服务器程序，选择对应的配置文件，然后根据自己的需要修改自己现行的网站配置即可！<p>如果您使用下面的配置，您可以需要自己配置证书 CRT 和证书 KEY 才能正常使用<p><strong>如果您只有一个网站是使用 https 的，而子域名其他并不使用 https ，请自行删除配置中的<code>includeSubdomains</code></strong><h2>nginx</h2><pre><code class=language-nginx>ssl_ciphers &quot;AES128+EECDH:AES128+EDH&quot;;
ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
ssl_prefer_server_ciphers on;
ssl_session_cache shared:SSL:10m;
add_header Strict-Transport-Security &quot;max-age=63072000; includeSubdomains; preload&quot;;
add_header X-Frame-Options DENY;
add_header X-Content-Type-Options nosniff;
ssl_session_tickets off;
ssl_stapling on; # Requires nginx &gt;= 1.3.7
ssl_stapling_verify on; # Requires nginx =&gt; 1.3.7
resolver 8.8.8.8 8.8.4.4 valid=300s;
resolver_timeout 5s;
</code></pre><h2>Apache</h2><pre><code class=language-apache>SSLCipherSuite AES128+EECDH:AES128+EDH
SSLProtocol All -SSLv2 -SSLv3
SSLHonorCipherOrder On
SSLSessionTickets Off
Header always set Strict-Transport-Security &quot;max-age=63072000; includeSubdomains; preload&quot;
Header always set X-Frame-Options DENY
Header always set X-Content-Type-Options nosniff
# Requires Apache &gt;= 2.4
SSLCompression off
SSLUseStapling on
SSLStaplingCache &quot;shmcb:logs/stapling-cache(150000)&quot;
</code></pre><h2>Lighttpd</h2><pre><code class=language-lighttpd>ssl.honor-cipher-order = &quot;enable&quot;
ssl.cipher-list = &quot;AES128+EECDH:AES128+EDH&quot;
ssl.use-compression = &quot;disable&quot;
setenv.add-response-header = (
    &quot;Strict-Transport-Security&quot; =&gt; &quot;max-age=63072000; includeSubdomains; preload&quot;,
    &quot;X-Frame-Options&quot; =&gt; &quot;DENY&quot;,
    &quot;X-Content-Type-Options&quot; =&gt; &quot;nosniff&quot;
)
ssl.use-sslv2 = &quot;disable&quot;
ssl.use-sslv3 = &quot;disable&quot;
</code></pre><hr><p>配置摘自：<a href=https://cipherli.st/ rel=nofollow>https://cipherli.st/</a></div></div><div id=disqus_thread></div><div id=footer><span>Copyright © 2015 - 2020 imlonghao. Theme by
<a href=http://simiki.org/ target=_blank rel="noopener noreferrer">Simiki</a>. CC BY-NC-SA 4.0</span></div><script src=https://cdn.jsdelivr.net/npm/cfga@1.0.3/cfga.min.js integrity="sha256-TXHTTKAPRQ9mgacgN+couk0xnzQ6uOXTZ5ojH1q6GUk=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/vanilla-lazyload@12.3.0/dist/lazyload.min.js integrity="sha256-bojBIKfs4l2WDcJODncBIGEe5fhU7/sM3zRO5/f2nqE=" crossorigin=anonymous async></script>