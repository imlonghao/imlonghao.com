<!doctype html><html lang=zh-cn><title>将数据从 MySQL 迁移到 MongoDB - imlonghao</title><meta name=description content="MongoDB 是一个基于分布式文件存储的数据库。由 C++ 语言编写。旨在为WEB应用提供可扩展的高性能数据存储解决方案。"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=renderer content="webkit"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><link rel=dns-prefetch href=//vip1.loli.net><link rel=stylesheet href=/static/hw3x7x.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/disqusjs@1.3.0/dist/disqusjs.css integrity="sha256-GxdCIOyfxQ1OBfS99qAIJDoGK1ADuBsxhMTqXG82fAY=" crossorigin=anonymous><script src=/static/hw3x7x.js async></script><script src=https://cdn.jsdelivr.net/npm/disqusjs@1.3.0/dist/disqus.js integrity="sha256-LVaMHPQ2zLqOc5rXSAfr4d1PIkEGNLyyUTDNPZmTtUw=" crossorigin=anonymous></script><script src=//instant.page/3.0.0 type=module defer integrity=sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1></script><link rel=alternate type=application/rss+xml title="imlonghao Feed" href=https://imlonghao.com/feed.xml><div id=container><div id=header><div id=post-nav><a href=./>Home</a>
&nbsp;»&nbsp;
<a href=./14.html>将数据从 MySQL 迁移到 MongoDB</a></div></div><div class=clearfix></div><div id=title>将数据从 MySQL 迁移到 MongoDB</div><div id=content class=markdown-body><h2>什么是 MongoDB</h2><blockquote><p>MongoDB 是一个基于分布式文件存储的数据库。由 C++ 语言编写。旨在为 WEB 应用提供可扩展的高性能数据存储解决方案。<p>MongoDB 是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。他支持的数据结构非常松散，是类似 json 的 bson 格式，因此可以存储比较复杂的数据类型。 MongoDB 最大的特点是他支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。</blockquote><p>摘自百度百科：<a href=http://baike.baidu.com/subview/3385614/9338179.htm rel=nofollow>mongodb（分布式文档存储数据库）</a><h2>为什么我要迁移到 MongoDB</h2><p>一个原因之一：我闲的蛋疼&mldr;&mldr;&mldr;&mldr;&mldr;&mldr;..<p>另一个原因：之前我 VPS 上的网站均是采用 MySQL 做数据库，在与 tornado 链接的时候使用了拥塞式的模块 <code>torndb</code> ，这样在面对大流量的时候，就会出现拥塞的现象虽然我的网站不会遇到这种大流量的状况。<p>为了使用上一个异步的数据库，所以我就打算趁现在网站数据不多，就迁移去 MongoDB ，并且使用上异步的 <code>motor</code> 做 tornado 的连接。<h2>迁移过程</h2><p>这里使用到了我上文所说的几个模块，分别是<code>torndb</code> 和 <code>pymongo</code><p>您可以使用下面的代码进行安装（请先确保你的服务器已经安装好了 pip）<pre><code>pip install torndb
pip install pymongo
</code></pre><p>假定我们的 MySQL 的数据库是 test ，我们需要将其中的 articles 表迁移过去。<p>打开我们的 python 终端<pre><code>root@imlonghao:~# python
Python 2.7.9 (default, Mar  1 2015, 12:57:24)
[GCC 4.9.2] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import torndb
&gt;&gt;&gt; import pymongo
&gt;&gt;&gt; mysql = torndb.Connection(host='localhost', database='test', user='root', password='root123456')
&gt;&gt;&gt; mongo = pymongo.MongoClient('mongodb://root:root123456@localhost').test
&gt;&gt;&gt; articles = mysql.query('SELECT * FROM articles')
&gt;&gt;&gt; mongo.articles.insert(articles)
......
</code></pre><p>在经过很长的等待之后，不出意外我们的数据库就已经迁移过去了。</div></div><div id=disqus_thread></div><div id=footer><span>Copyright © 2015 - 2020 imlonghao. Theme by
<a href=http://simiki.org/ target=_blank rel="noopener noreferrer">Simiki</a>. CC BY-NC-SA 4.0</span></div><script src=https://cdn.jsdelivr.net/npm/cfga@1.0.3/cfga.min.js integrity="sha256-TXHTTKAPRQ9mgacgN+couk0xnzQ6uOXTZ5ojH1q6GUk=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/vanilla-lazyload@12.3.0/dist/lazyload.min.js integrity="sha256-bojBIKfs4l2WDcJODncBIGEe5fhU7/sM3zRO5/f2nqE=" crossorigin=anonymous async></script>